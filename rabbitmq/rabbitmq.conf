# RabbitMQ Configuration for Eagle Microservices
# Performance and reliability optimized

## Networking
listeners.tcp.default = 5672
management.tcp.port = 15672

## Memory Management
# Use 60% of available memory before flow control
vm_memory_high_watermark.relative = 0.6

## Disk Space
# Minimum 2GB free disk space
disk_free_limit.absolute = 2GB

## Persistence
# Quorum queues provide better durability and consistency
# Classic queue mirroring is deprecated in favor of quorum queues
# All queues are configured as quorum type in definitions.json

## Management Plugin
management.load_definitions = /etc/rabbitmq/definitions.json

## Logging
log.console = true
log.console.level = info
log.file = /var/log/rabbitmq/rabbitmq.log
log.file.level = info

## Heartbeat (connection health check)
heartbeat = 60

## Default User
default_user = fusionx
default_pass = fusionx2024
default_vhost = /

## Prometheus Metrics (for monitoring)
# Prometheus plugin exposes metrics on port 15692
# Access metrics at: http://localhost:15692/metrics
prometheus.tcp.port = 15692

## Deprecated Features
# Temporarily permit deprecated management metrics collection
# TODO: Migrate to Prometheus metrics exclusively and set this to false
# The management plugin still uses this feature, so we permit it for now
deprecated_features.permit.management_metrics_collection = true
